<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>å†™çœŸæŠ•ç¨¿ã‚¢ãƒ«ãƒãƒ </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue",
        "Segoe UI", sans-serif;
      color: #222;
      background: #f5f5f7;
    }

    body {
      margin: 0;
      padding: 0;
      background: #f5f5f7;
    }

    .app {
      max-width: 960px;
      margin: 0 auto;
      padding: 16px;
    }

    header {
      text-align: center;
      margin-bottom: 16px;
    }

    header h1 {
      font-size: 1.4rem;
      margin: 0 0 4px;
    }

    header p {
      font-size: 0.85rem;
      color: #666;
      margin: 0;
    }

    .card {
      background: #fff;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.04);
      margin-bottom: 16px;
    }

    .form-grid {
      display: grid;
      gap: 12px;
    }

    @media (min-width: 640px) {
      .form-grid-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 4px;
      color: #444;
    }

    input[type="text"],
    input[type="file"],
    textarea {
      width: 100%;
      box-sizing: border-box;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #d0d0d5;
      font-size: 0.9rem;
      background: #fafafa;
    }

    input[type="file"] {
      padding: 8px 4px;
      background: transparent;
    }

    textarea {
      min-height: 72px;
      resize: vertical;
    }

    .hint {
      font-size: 0.75rem;
      color: #888;
      margin-top: 2px;
    }

    button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      background: #007aff;
      color: #fff;
      width: 100%;
    }

    button:active {
      transform: translateY(1px);
      opacity: 0.9;
    }

    .button-row {
      margin-top: 4px;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
    }

    .section-title span {
      font-size: 0.75rem;
      color: #666;
      font-weight: 400;
    }

    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 12px;
    }

    .photo-card {
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
    }

    .photo-thumb-wrapper {
      position: relative;
      width: 100%;
      padding-top: 75%; /* 4:3 */
      overflow: hidden;
      background: #eee;
    }

    .photo-thumb-wrapper img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      border: none;
    }

    .photo-meta {
      padding: 8px 10px 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .meta-main {
      font-size: 0.85rem;
      font-weight: 600;
    }

    .meta-sub {
      font-size: 0.78rem;
      color: #666;
    }

    .meta-tags {
      font-size: 0.75rem;
      color: #444;
    }

    .meta-tags span {
      background: #f0f0f5;
      border-radius: 999px;
      padding: 2px 8px;
      margin-right: 4px;
      display: inline-block;
      margin-bottom: 2px;
    }

    .meta-comment {
      font-size: 0.8rem;
      color: #333;
      margin-top: 2px;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .meta-time {
      font-size: 0.72rem;
      color: #aaa;
      margin-top: 2px;
    }

    .empty-state {
      font-size: 0.85rem;
      color: #666;
      text-align: center;
      padding: 24px 12px;
    }

    .badge {
      display: inline-block;
      font-size: 0.7rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: #e5f0ff;
      color: #1554c0;
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>å†™çœŸæŠ•ç¨¿ã‚¢ãƒ«ãƒãƒ </h1>
      <p>ã‚¹ãƒãƒ›ã§å†™çœŸï¼‹ã‚³ãƒ¡ãƒ³ãƒˆã‚’æŠ•ç¨¿ã—ã¦ã€ã¿ã‚“ãªã®ã‚¢ãƒ«ãƒãƒ ã‚’ã¤ãã‚‹ç°¡æ˜“ã‚¢ãƒ—ãƒª</p>
    </header>

    <!-- æŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ  -->
    <section class="card">
      <form id="postForm">
        <div class="form-grid">
          <div>
            <label for="photo">å†™çœŸï¼ˆå¿…é ˆï¼‰</label>
            <!-- capture å±æ€§ã‚’ã¤ã‘ã‚‹ã¨ã‚¹ãƒãƒ›ã®ã‚«ãƒ¡ãƒ©èµ·å‹•ã‚’ä¿ƒã›ã‚‹ç«¯æœ«ã‚‚ã‚ã‚Šã¾ã™ -->
            <input
              id="photo"
              type="file"
              accept="image/*"
              capture="environment"
              required
            />
            <div class="hint">ã‚¹ãƒãƒ›ã®ã‚«ãƒ¡ãƒ©ï¼ã‚¢ãƒ«ãƒãƒ ã‹ã‚‰1æšé¸æŠ</div>
          </div>

          <div class="form-grid form-grid-2">
            <div>
              <label for="name">æ°å</label>
              <input id="name" type="text" placeholder="ä¾‹ï¼‰å±±ç”° å¤ªéƒ" />
            </div>
            <div>
              <label for="department">éƒ¨é–€</label>
              <input id="department" type="text" placeholder="ä¾‹ï¼‰å–¶æ¥­éƒ¨" />
            </div>
          </div>

          <div>
            <label for="keywords">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
            <input
              id="keywords"
              type="text"
              placeholder="ä¾‹ï¼‰æ‡‡è¦ªä¼š, ãƒãƒ¼ãƒ A, è¡¨å½°"
            />
            <div class="hint">
              ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°OKï¼ˆæ¤œç´¢ç”¨ã‚¿ã‚°ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰
            </div>
          </div>

          <div>
            <label for="comment">ãƒ•ãƒªãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆ</label>
            <textarea
              id="comment"
              placeholder="å†™çœŸã«ã¤ã„ã¦ã²ã¨è¨€ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚"
            ></textarea>
          </div>

          <div class="button-row">
            <button type="submit">
              ğŸ“¸ å†™çœŸã‚’æŠ•ç¨¿ã™ã‚‹
            </button>
          </div>
        </div>
      </form>
    </section>

    <!-- ã‚¢ãƒ«ãƒãƒ ä¸€è¦§ -->
    <section class="card">
      <div class="section-title">
        <span>ğŸ“š ã‚¢ãƒ«ãƒãƒ ä¸€è¦§</span>
        <span id="postCount" class="badge">0ä»¶</span>
      </div>
      <div id="gallery" class="gallery">
        <div class="empty-state">
          ã¾ã æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰å†™çœŸã‚’æŠ•ç¨¿ã™ã‚‹ã¨ã€ã“ã“ã«ä¸€è¦§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
        </div>
      </div>
    </section>

    <!-- ä½¿ã„æ–¹ï¼ˆQRã‚³ãƒ¼ãƒ‰é–¢é€£ãƒ¡ãƒ¢ï¼‰ -->
    <section class="card">
      <div class="section-title">
        <span>â„¹ï¸ ä½¿ã„æ–¹ãƒ¡ãƒ¢</span>
      </div>
      <ul style="font-size: 0.75rem; color: #555; padding-left: 18px; margin: 0;">
        <li>ã“ã®HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’WEBã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦URLã‚’ç™ºè¡Œã—ã¾ã™ã€‚</li>
        <li>ãã®URLã‹ã‚‰QRã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã€å‚åŠ è€…ã«é…å¸ƒã—ã¦ãã ã•ã„ã€‚</li>
        <li>å‚åŠ è€…ã¯QRã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã“ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ãã€ã‚¹ãƒãƒ›ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å†™çœŸã‚’æŠ•ç¨¿ã§ãã¾ã™ã€‚</li>
        <li>â€»ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã¯ã‚µãƒ¼ãƒãƒ¼é€£æºãªã—ã®ã€Œãƒ–ãƒ©ã‚¦ã‚¶å†…å®Œçµç‰ˆã€ã§ã™ã€‚<br>
          å…±æœ‰ã‚¢ãƒ«ãƒãƒ ã«ã—ãŸã„å ´åˆã¯ã€ã‚ã¨ã‹ã‚‰ã‚µãƒ¼ãƒãƒ¼å´ã®ä¿å­˜å‡¦ç†ï¼ˆAPIï¼‰ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
        </li>
      </ul>
    </section>
  </div>

  <script>
    const form = document.getElementById("postForm");
    const gallery = document.getElementById("gallery");
    const postCount = document.getElementById("postCount");

    // ãƒ¡ãƒ¢ãƒªä¸Šã ã‘ã§ä¿æŒã™ã‚‹æŠ•ç¨¿ãƒªã‚¹ãƒˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ã‚µãƒ¼ãƒãƒ¼ä¿å­˜ã«ç½®ãæ›ãˆï¼‰
    const posts = [];

    form.addEventListener("submit", (event) => {
      event.preventDefault();

      const fileInput = document.getElementById("photo");
      const nameInput = document.getElementById("name");
      const deptInput = document.getElementById("department");
      const keywordsInput = document.getElementById("keywords");
      const commentInput = document.getElementById("comment");

      const file = fileInput.files[0];
      if (!file) {
        alert("å†™çœŸã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚");
        return;
      }

      // ç”»åƒã‚’Data URLã¨ã—ã¦èª­ã¿è¾¼ã¿ â†’ ã‚®ãƒ£ãƒ©ãƒªãƒ¼è¡¨ç¤ºç”¨
      const reader = new FileReader();
      reader.onload = (e) => {
        const dataUrl = e.target.result;

        const post = {
          id: Date.now(),
          image: dataUrl,
          name: (nameInput.value || "").trim(),
          department: (deptInput.value || "").trim(),
          keywords: (keywordsInput.value || "").trim(),
          comment: (commentInput.value || "").trim(),
          createdAt: new Date().toLocaleString(),
        };

        // æ–°ã—ã„æŠ•ç¨¿ã‚’å…ˆé ­ã«è¿½åŠ 
        posts.unshift(post);
        renderGallery();

        // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
        form.reset();
      };

      reader.readAsDataURL(file);
    });

    function renderGallery() {
      gallery.innerHTML = "";

      if (posts.length === 0) {
        gallery.innerHTML =
          '<div class="empty-state">ã¾ã æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰å†™çœŸã‚’æŠ•ç¨¿ã™ã‚‹ã¨ã€ã“ã“ã«ä¸€è¦§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>';
        postCount.textContent = "0ä»¶";
        return;
      }

      postCount.textContent = posts.length + "ä»¶";

      posts.forEach((post) => {
        const card = document.createElement("article");
        card.className = "photo-card";

        const imgWrapper = document.createElement("div");
        imgWrapper.className = "photo-thumb-wrapper";

        const link = document.createElement("a");
        link.href = post.image;
        link.target = "_blank";
        link.rel = "noopener noreferrer";
        link.title = "ã‚¿ãƒƒãƒ—ã—ã¦æ‹¡å¤§è¡¨ç¤º";

        const img = document.createElement("img");
        img.src = post.image;
        img.alt = post.comment || "æŠ•ç¨¿å†™çœŸ";

        link.appendChild(img);
        imgWrapper.appendChild(link);

        const meta = document.createElement("div");
        meta.className = "photo-meta";

        const main = document.createElement("div");
        main.className = "meta-main";
        main.textContent =
          (post.name || "ï¼ˆåç„¡ã—ï¼‰") +
          (post.department ? "ï½œ" + post.department : "");

        const sub = document.createElement("div");
        sub.className = "meta-sub";
        sub.textContent = "æŠ•ç¨¿è€…æƒ…å ±";

        const tags = document.createElement("div");
        tags.className = "meta-tags";
        if (post.keywords) {
          const parts = post.keywords
            .split(/[ã€,]/)
            .map((t) => t.trim())
            .filter((t) => t.length > 0);
          parts.forEach((tag) => {
            const span = document.createElement("span");
            span.textContent = "#" + tag;
            tags.appendChild(span);
          });
        }

        const comment = document.createElement("div");
        comment.className = "meta-comment";
        comment.textContent = post.comment || "";

        const time = document.createElement("div");
        time.className = "meta-time";
        time.textContent = post.createdAt;

        meta.appendChild(main);
        meta.appendChild(sub);
        if (post.keywords) meta.appendChild(tags);
        if (post.comment) meta.appendChild(comment);
        meta.appendChild(time);

        card.appendChild(imgWrapper);
        card.appendChild(meta);

        gallery.appendChild(card);
      });
    }
  </script>
</body>
</html>
